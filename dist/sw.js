/*! For license information please see sw.js.LICENSE.txt */
(()=>{"use strict";var n="flintmail-data-",e="".concat("flintmail-app-shell-").concat("v2"),t="".concat(n).concat("v2"),r=["/","/index.html","/bundle.js","/css/normalize.css","/public-assets-manifest.json","/img/arrow-left.svg","/img/background.jpg","/img/close-modal.svg","/img/folder-add.svg","/img/folder-dialog.svg","/img/folder-drafts.svg","/img/folder-inbox.svg","/img/folder-sent.svg","/img/folder-spam.svg","/img/folder-trash.svg","/img/logo.svg","/img/menu-logout-logo.svg","/img/menu-profile-logo.svg","/img/menu-settings-logo.svg","/img/message-back.svg","/img/message-delete.svg","/img/message-forward.svg","/img/message-in-folder.svg","/img/message-reply.svg","/img/message-to-spam.svg","/img/modal-attach-file.svg","/img/modal-to-draft.svg","/img/profile-sidebar-interface-logo.svg","/img/profile-sidebar-personal-logo.svg","/img/search-logo.svg","/img/search-normal.png","/img/working-offline.svg"];function o(n){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(n)}function i(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function c(t,r,o,i){var c=r&&r.prototype instanceof s?r:s,f=Object.create(c.prototype);return a(f,"_invoke",function(t,r,o){var i,a,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(e,t){return i=e,a=0,c=n,p.n=t,u}};function m(t,r){for(a=t,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],m=p.p,h=i[2];t>3?(o=h===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=n):i[0]<=m&&((o=t<2&&m<i[1])?(a=0,p.v=r,p.n=i[1]):m<h&&(o=t<3||i[0]>r||r>h)&&(i[4]=t,i[5]=r,p.n=h,a=0))}if(o||t>1)return u;throw l=!0,r}return function(o,f,h){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&m(f,h),a=f,c=h;(e=a<2?n:c)||!l;){i||(a?a<3?(a>1&&(p.n=-1),m(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=n}else if((e=(l=p.n<0)?c:t.call(r,p))!==u)break}catch(e){i=n,a=1,c=e}finally{s=1}}return{value:e,done:l}}}(t,o,i),!0),f}var u={};function s(){}function f(){}function l(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),m=l.prototype=s.prototype=Object.create(p);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,a(n,o,"GeneratorFunction")),n.prototype=Object.create(m),n}return f.prototype=l,a(m,"constructor",l),a(l,"constructor",f),f.displayName="GeneratorFunction",a(l,o,"GeneratorFunction"),a(m),a(m,o,"Generator"),a(m,r,function(){return this}),a(m,"toString",function(){return"[object Generator]"}),(i=function(){return{w:c,m:h}})()}function a(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}a=function(n,e,t,r){function i(e,t){a(n,e,function(n){return this._invoke(e,t,n)})}e?o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t:(i("next",0),i("throw",1),i("return",2))},a(n,e,t,r)}function c(n,e,t,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void t(n)}c.done?e(u):Promise.resolve(u).then(r,o)}function u(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(n){c(i,r,o,a,u,"next",n)}function u(n){c(i,r,o,a,u,"throw",n)}a(void 0)})}}function s(n){var e=function(n){if("object"!=o(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=o(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==o(e)?e:e+""}function f(n){var e="function"==typeof Map?new Map:void 0;return f=function(n){if(null===n||!function(n){try{return-1!==Function.toString.call(n).indexOf("[native code]")}catch(e){return"function"==typeof n}}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(n))return e.get(n);e.set(n,t)}function t(){return function(n,e,t){if(l())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(n.bind.apply(n,r));return t&&p(o,t.prototype),o}(n,arguments,m(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),p(t,n)},f(n)}function l(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(l=function(){return!!n})()}function p(n,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},p(n,e)}function m(n){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m(n)}var h="X-Flintmail-Offline",g=["/messages","/profile","/auth"],v=["217.16.16.26","localhost","127.0.0.1"],y=function(n){function e(){return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(n,e,t){return e=m(e),function(n,e){if(e&&("object"==o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,l()?Reflect.construct(e,t||[],m(n).constructor):e.apply(n,t))}(this,e,arguments)}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&p(n,e)}(e,n),t=e,Object.defineProperty(t,"prototype",{writable:!1}),t;var t}(f(Error));function d(){return d=u(i().m(function n(e,t,r){var o,a,c,s,f;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.n=1,caches.open(r.cacheName);case 1:return o=n.v,n.n=2,o.match(t);case 2:if(a=n.v,c=function(){var n=u(i().m(function n(){var e,a;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,fetch(t);case 1:if(e=n.v,!r.offlineHeader||"1"!==e.headers.get(h)){n.n=2;break}throw new y;case 2:if(!e||200!==e.status){n.n=3;break}return n.n=3,o.put(t,e.clone());case 3:return n.a(2,e);case 4:if(n.p=4,a=n.v,!r.offlineHeader){n.n=5;break}throw new y;case 5:throw a;case 6:return n.a(2)}},n,null,[[0,4]])}));return function(){return n.apply(this,arguments)}}(),!a){n.n=3;break}return e.waitUntil(c().catch(function(){})),n.a(2,a);case 3:return n.p=3,n.n=4,c();case 4:return n.a(2,n.v);case 5:if(n.p=5,!((f=n.v)instanceof y)){n.n=8;break}return n.n=6,o.match(t);case 6:if(!(s=n.v)){n.n=7;break}return n.a(2,s);case 7:return n.a(2,w());case 8:throw f;case 9:return n.a(2)}},n,null,[[3,5]])})),d.apply(this,arguments)}function b(){return(b=u(i().m(function n(e,t){var r,o,a;return i().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,caches.open(t.cacheName);case 1:return r=n.v,n.n=2,r.match(e);case 2:if(!(o=n.v)){n.n=3;break}return n.a(2,o);case 3:return n.n=4,fetch(e);case 4:return a=n.v,r.put(e,a.clone()),n.a(2,a)}},n)}))).apply(this,arguments)}function w(){return new Response(JSON.stringify({message:"offline",offline:!0}),{status:503,statusText:"Offline",headers:(n={"Content-Type":"application/json"},e=h,(e=s(e))in n?Object.defineProperty(n,e,{value:"1",enumerable:!0,configurable:!0,writable:!0}):n[e]="1",n)});var n,e}function j(){return(j=u(i().m(function n(t){var r,o,a,c,u;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.n=1,caches.open(e);case 1:return r=n.v,n.p=2,n.n=3,fetch(t);case 3:return(o=n.v)&&200===o.status&&r.put(t,o.clone()),n.a(2,o);case 4:return n.p=4,n.v,n.n=5,r.match(t);case 5:if(!(a=n.v)){n.n=6;break}return n.a(2,a);case 6:return n.n=7,r.match("/index.html");case 7:if(u=n.v){n.n=9;break}return n.n=8,r.match("/");case 8:u=n.v;case 9:if(!(c=u)){n.n=10;break}return n.a(2,c);case 10:return n.a(2,O())}},n,null,[[2,4]])}))).apply(this,arguments)}function O(){return new Response('\n        <!doctype html>\n        <html lang="ru">\n            <head>\n                <meta charset="utf-8" />\n                <title>Flintmail - офлайн</title>\n                <style>\n                    body {\n                        margin: 0;\n                        font-family: "Inter", Arial, sans-serif;\n                        background: #f5f6fb;\n                        color: #1f2544;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        min-height: 100vh;\n                        text-align: center;\n                    }\n                    .offline {\n                        max-width: 320px;\n                        padding: 32px;\n                    }\n                    .offline img {\n                        width: 96px;\n                        height: 96px;\n                        margin-bottom: 16px;\n                    }\n                    .offline h1 {\n                        font-size: 20px;\n                        margin: 0 0 8px;\n                    }\n                    .offline p {\n                        margin: 0;\n                        color: #5d6381;\n                    }\n                </style>\n            </head>\n            <body>\n                <div class="offline">\n                    <img src="/img/working-offline.svg" alt="Работаем офлайн" loading="lazy" decoding="async" />\n                    <h1>Нет подключения к сети</h1>\n                    <p>Как только соединение восстановится, страница обновится автоматически.</p>\n                </div>\n            </body>\n        </html>\n    ',{status:200,headers:{"Content-Type":"text/html; charset=utf-8"}})}function k(){return(k=u(i().m(function n(e){var t;return i().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,caches.keys();case 1:return t=n.v,n.n=2,Promise.all(t.filter(function(n){return n.startsWith(e)}).map(function(n){return caches.delete(n)}));case 2:return n.a(2)}},n)}))).apply(this,arguments)}function x(n){return P.apply(this,arguments)}function P(){return(P=u(i().m(function n(e){var t,r,o,a;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,fetch("/public-assets-manifest.json",{cache:"no-store"});case 1:if((t=n.v)&&t.ok){n.n=2;break}return n.a(2);case 2:return n.n=3,t.json();case 3:if((r=n.v)&&Array.isArray(r.images)){n.n=4;break}return n.a(2);case 4:if(0!==(o=r.images.filter(function(n){return"string"==typeof n})).length){n.n=5;break}return n.a(2);case 5:return n.n=6,e.addAll(o);case 6:n.n=8;break;case 7:n.p=7,a=n.v,console.warn("[sw] failed to precache public images",a);case 8:return n.a(2)}},n,null,[[0,7]])}))).apply(this,arguments)}self.addEventListener("install",function(n){n.waitUntil(u(i().m(function n(){var t;return i().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,caches.open(e);case 1:return t=n.v,n.n=2,t.addAll(r);case 2:return n.n=3,x(t);case 3:return n.n=4,self.skipWaiting();case 4:return n.a(2)}},n)}))())}),self.addEventListener("activate",function(n){n.waitUntil(caches.keys().then(function(n){return Promise.all(n.map(function(n){return n!==e&&n!==t?caches.delete(n):Promise.resolve(!1)}))})),self.clients.claim()}),self.addEventListener("message",function(e){var t,r=null!==(t=e.data)&&void 0!==t?t:{};r&&"string"==typeof r.type&&"SW_CLEAR_DATA_CACHE"===r.type&&e.waitUntil(function(n){return k.apply(this,arguments)}(n))}),self.addEventListener("fetch",function(n){var r=n.request;if("GET"===r.method){var o=new URL(r.url);!function(n){return"navigate"===n.mode||"document"===n.destination}(r)?function(n){return v.includes(n.hostname)||g.some(function(e){return n.pathname.startsWith(e)})}(o)?n.respondWith(function(n,e,t){return d.apply(this,arguments)}(n,r,{cacheName:t,offlineHeader:!0})):n.respondWith(function(n,e){return b.apply(this,arguments)}(r,{cacheName:e})):n.respondWith(function(n){return j.apply(this,arguments)}(r))}})})();